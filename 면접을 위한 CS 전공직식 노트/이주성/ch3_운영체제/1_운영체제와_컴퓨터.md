
## 운영체제와 컴퓨터

### 운영체제의 역할과 구조

**운영체제 역할**
1. CPU 스케줄링 및 프로세스 관리
2. 메모리 관리
3. 디스크 파일 관리
4. I/O 디바이스 관리

**운영체제 구조**

![img.png](img.png)

| GUI(Graphical User Interface): 사용자가 그래픽 요소를 통해 시스템과 상호작용하는 인터페이스. ex) 마우스 클릭
| Driver: 하드웨어와 소프트웨어 간의 통신을 가능하게 하는 소프트웨어
| CUI(Character User Interface): 텍스트 기반 명령어를 입력해 시스템과 상호작용하는 인터페이스 

**System Call**
운영체제가 커널에 접근하기 위한 인터페이스로 유저 프로그램이 커널 함수를 호출해 운영체제의 서비스를 받기 위해 사용한다.

![img_2.png](img_2.png)

- **여러 개**의 사용자 **애플리케이션**에게 **하드웨어 가상화**를 제공
    - 여러 애플리케이션이 HW를 사용할 수 있도록
    - **HW를 쉽게 사용하기 위해선 추상화, API 필요**
        - 뒷단 신경 안 쓰고 추상화된 앞단으로 HW를 사용하도록
        - Process, Memory Space, File System, System Calls
- 제한된 하드웨어 자원에 대한 원활한 공유
- 접근 제어 및 권한을 활용한 하드웨어 자원 보호
- 사용자 애플리케이션 간의 격리


시스템 콜이 작동될 때 modebit를 참고해서 유저 모드(1)와 커널 모드(0)을 구분한다. 시스템 콜을 호출해 modebit를 1에서 0으로 바꾸면서 커널 모드로 변경해 자원에 접근한다.

<br/>

---

### 컴퓨터의 요소

**CPU(Central Processing Unit)**

- 산술 논리 장치, 제어장치, 레지스터로 구성된 컴퓨터의 엔진 역할
  - 산술 논리 장치(ALU, Arithmetic Logic Unit): 사칙 연산, and, or 등 논리 연산 계산 
  - 제어장치(CU, Control Unit): 프로세스 조작을 지시. 입출력 장치 간 통신을 제어하고 명령어들을 읽고 해석하며 데이터 처리를 위한 순서 결정
  - 레지스터: CPU 안에 있는 매우 빠른 임시 기억 장치로 메모리보다 압도적으로 빠름. CPU는 자체적으로 데이터를 저장할 수 없으므로 레지스터를 거쳐 데이터를 전달한다.
- 인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼
  - 관리자 OS가 커널을 통해 프로그램을 메모리에 프로세스로 띄운 뒤 CPU에게 일시키는 느낌

**CPU의 연산 처리**

![img_4.png](img_4.png)

1. Fetch
    - 메모리에서 PC 주소의 명령어 가져오기
2. Decode
    - 명령어의 opcode 해독
    - 필요한 경우 소스 레지스터와 목적지 레지스터 식별
    - Control Unit은 명령어에 따라 필요한 제어 신호 생성
3. Evalutate address
    - 명령어가 메모리 접근이 필요한 경우 (lw, sw),  base 주소와 offest을 더해 메모리 주소를 계산
    - 분기 명령어의 경우 target 주소 계산
4. Fetch operands
    - 소스 레지스터 값 읽어오기
    - 메모리의 계산된 주소로부터 읽어오기
5. Execute
    - ALU를 사용해 명령어 연산 수행
6. Store result
    - 실행 결과를 목적지 레지스터 (산술/논리 연산, lw) or 메모리(sw)에 저장

**인터럽트**
키보드, 마우스 등 IO 디바이스의 신호 또는 0으로 나누는 산술 연산이나 프로세스 오류 등이 발생했을 때 CPU를 잠깐 정지키시는 것으로 인터럽트가 발생하면 핸들러 함수가 모여있는 인터셉트 백터로 가서 핸들링한다.

- 하드웨어 인터럽트
  - 키보드, 마우스 연결 등의 IO 디바이스에서 발생하는 인터럽트
  - 하드웨어가 "나 뭔가 할 일이 생겼어!"라고 CPU에 알리는 것
  - 하드웨어 인터럽트가 발생하면(마우스 클릭 등) 운영체제에 시스템콜을 요청해 디바이스의 작은 로컬 버퍼에 접근해 일을 수행
- 소프트웨어 인터럽트
  - 프로세스 오류 등으로 프로세스가 시스템콜을 호출할 대 발생하는 인터럽트로 트랩(trap)이라고도 불림

---

**DMA 컨트롤러**

- I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치
- CPU 부하를 줄여주는 보조 역할
- 하나의 작업을 CPU와 DMA 컨트롤러가 동시에 하지 않도록 방지

**메모리**
- 데이터를 기록하는 장치로 보통 RAM(Random Access Memory)라고 불림

**타이머**
- 작업의 제한 시간

**디바이스 컨트롤러**
- 컴퓨터와 연결된 IO 디바이스들의 작은 CPU
- 각 디바이스는 임시 저장소 로컬 버퍼 보유


<br/>

---

**출처**

- https://math-coding.tistory.com/80
- 면접을 위한 CS 전공지식 노트
