
## 데이터베이스의 기본

데이터베이스는 일정한 규칙을 통해 구조화되어 저장되는 데이터 저장소이고, 이 데이터베이스를 제어, 관리하는 통합 시스템을 DBMS(DataBase Management System)라고 한다.

![img.png](img.png)

<br/>

---

### 엔티티

- 서비스의 요구 사항에 맞춰진 속성을 지닌 명사
  - 속성: 구체적이고 고유한 이름을 갖는 정보

ex) 회원 엔티티는 이름, 아이디, 주소, 전화번호 속성을 가진다.

**약한 엔티티 vs 강한 엔티티**

- 혼자서는 존재하지 못하고 다른 엔티티의 여부에 따라 종속적인 경우 약한 엔티티
- 다른 엔티티가 의존하는 엔티티는 강한 엔티티


<br/>

---

### 릴레이션(relation)

- 데이터베이스에서 정보를 구분해 저장하는 기본 단위
- 엔티티에 관한 데이터를 데이터베이스는 릴레이션 하나에 담아서 관리
    - NoSQL 데이터베이스에서는 '컬렉션'이라고 한다.

![img_1.png](img_1.png)

**테이블과 컬렉션**

데이버베이스는 크게 관계형 데이터베이스, NoSQL 데이터베이스로 나뉜다.
- 관계형 DB
  - 레코드-테이블-데이터베이스 구조
  - 레코드가 쌓여서 테이블이 되고 테이블 쌓여서 데이터베이스가 됨
  - ex) MySQL, MariaDB
- NoSQL DB
  - 도큐먼트-컬렉션-데이터베이스 구조
  - ex) MongoDB

![img_2.png](img_2.png)

<br/>

---

### 도메인(domain)

- 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합
  - ex) 성별 = {"남", 여"}

![img_3.png](img_3.png)


<br/>

---

### 필드와 레코드로 구성된 테이블

ex) 회원 테이블

![img_5.png](img_5.png)

### 필드 타입 (MySQL 기준)

필드는 타입을 갖는데 DBMS마다 다르다. MySQL 기준의 필드 타입은 다음과 같다.

**숫자 타입**

![img_6.png](img_6.png)

- 부호 없는 숫자를 저장할 때에는 UNSIGNED 예약어를 같이 사용해 

**날짜 타입**

- `DATE`
  - 날짜만
  - ex) 1999-02-19
- `DATETIME`
  - 날짜 및 시간 모두
  - 8바이트
  - ex) 1999-02-19 00:00:10
- `TIMESTAMP`
  - 날짜 및 시간 모두
  - 4바이트

**문자 타입**

- `CHAR`
  - 고정 길이 문자열로 0~255 사이의 값을 가진다.
  - 레코드를 저장할 때 무조건 선언한 길이 값으로 고정해서 저장한다.
  - ex) `CHAR(50)`에 1글만 저장해도 50byte로 저장
- `VARCHAR`
  - 가변 길이 문자열로 0~65,535 사이의 값을 가진다.
  - 입력된 데이터에 따라 용량을 가변해 저장
  - ex) 1글자 저장 시 1글자용 byte + 길이 기록용 1byte로 저장
- `TEXT`
  - 큰 문자열 저장 시 사용
  - 주로 게시판의 본문 저장 시 사용
- `BLOB`
  - 이미지, 동영상 등 큰 데이터 저장에 사용
  - 보통은 이걸 사용하기 보단 아마존의 이미지 호스팅 서비스인 S3를 사용하는 등 서버에 파일을 올리로 파일에 관한 정보를 `VARCHAR`로 저장한다.
- `ENUM`
  - 여러개를 열거한 후 단일 선택하는 방식
  - ENUM 리스트에 없는 잘못된 값을 삽입하면 빈 문자열이 대신 삽입
  - 메모리 적게 사용하는 장점
  - 최대 65,535개 요소 넣기 가능
- `SET`
  - ENUM과 비슷하지만 여러 개의 데이터 선택 가능
  - 비트 단위의 연산 가능
  - 최대 64개의 요소 넣기 가능

<br/>

---

### 관계

데이터베이스에는 여러 개의 테이블이 사이의 관계가 정의되어 있다. 이 관계는 관계 화살표로 표현할 수 있다.

![img_7.png](img_7.png)

> N:M의 경우 직접 두 테이블을 연결해서 구축하지는 않고 1:N, 1:M 관계를 갖는 관계 테이블로 구축한다.



<br/>

---

### 키

- 테이블 간 관계를 명확하게 하고, 테이블 자체의 인덱스를 위해 설정된 장치

![img_8.png](img_8.png)

- 유일성: 중복되는 값이 없음
- 최소성: 필드를 조합하지 않고 최소 필드만 써서 키를 형성

**기본키(Primary Key)**

- 유일성과 최소성 만족
- 테이블의 데이터 중 고유하기 존재하는 속성
- 자연키 또는 인조키 중 선택해서 설정
  - 자연키: 중복되지 않는 것을 자연스럽게 뽑는 방식으로 언젠가는 변하는 속성을 가진다.
  - 인조키: 인위적으로 고유 식별자를 만들어서 기본키로 설정하는 방식으로 변하지 않는다. (MySQL의 auto increment)

**외래키(Foreign Key)**

- 다른 테이블의 기본 키를 그대로 참조하는 값
- 개체와의 관계를 식별하는 데 사용
- 중복 가능 

**후보키(candidate key)**

- 기본키가 될 수 있는 후보
- 유일성과 최소성 동시에 만족

**대체키(alternate key)**

- 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키들

**슈퍼키**

- 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키


<br/>

---

**참고**

- https://inpa.tistory.com/entry/DB-📚-데이터-모델링-1N-관계-📈-ERD-다이어그램
- 